---
layout: document
title: "Views"
date: 2017-03-15 17:28:56
categories: Components
---

## Views

There are two options for constructing Views in STAPLE. 

The first option is to use basic PHP files with the extension `.phtml`. These files
simply execute a mixed PHP and HTML file, like classic PHP development.

The second option is to use Twig. The `TwigView` object will initialize a view
using the Twig template engine.

### The `views` Folder

Inside the views folder, all views are organized in folders names by the controller
and then the name of the action being executed as the view. For example a view
for the `AccountController` executing the `details` action would be located at
`/application/views/account/details.phtml`. 

This is the default view for the action. You can specify your different views
depending on the execution results of your application by returning a `View`
object that points to a different view file.

### Classic Views



#### Implementing a View in the Controller 

To have your action return a `View` object, you must create the view and then
return the view from your action. The view that is loaded will default to the
name of the action that is being executed.

The following code returns a `View` object with some data attached.

```php?start_inline=1
class ClientController extends Controller
{
    public function view($id)
    {
        $var1 = 'One';
        $var2 = 2;
        
        return View::create()->data([
            'var1' => $var1,
            'var2' => $var2 
        ]);
    }
}
```

#### Defining A Different View

If you want a different view than the default view that is loaded, you can specify
the name of the view you would like to load on the `create()` method. The `create()`
method accepts two parameters, the first being the view name and the second is the
folder name.

```php?start_inline=1
return View::create('details', 'account');
```

The above code will return the `details.phtml` file in the `account` folder. The
full path being: `/application/views/account/details.phtml`.

#### Outputting Content

Classic Views use a combination of PHP and HTML, the same as a single file php app.
Any data that is sent to the view is accessible through the `$this` variable by the
name specified when attached to the view.

```php
<h1>Welcome <?php echo $this->firstName; ?>!</h1>
<p>Thanks for visiting my application.</p>
```

#### Escaping Content

When working with user content, you should escape content to prevent code from 
being rendered to the website and to provide proper character encoding to your page.
Character encoding/escaping is provides through the helper function `escape()`.

```php
<h1>Welcome <?php echo $this->escape($this->firstName); ?>!</h1>
<p><strong>Bio:</strong> <?php echo $this->escape($this->bio); ?></p>
```

### Twig Views

STAPLE can also use Twig for rendering views. For more information on Twig check 
out the twig documentation site <https://twig.symfony.com/>

#### Implementing a Twig View in the Controller

To use a Twig View in a controller response return a `TwigView` object from the
action.

```php?start_inline=1
class ClientController extends Controller
{
    public function view($id)
    {
        return TwigView::create();
    }
}
```